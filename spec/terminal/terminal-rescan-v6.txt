
 â•”=================================================================â•—
 â•‘  STRATUM SCAN                                                   â•‘
 â•‘  crewAI-examples Â· 116 files Â· 20 crews Â· 56 agents             â•‘
 â•‘  Frameworks: CrewAI, LangChain, LangGraph                       â•‘
 â•š=================================================================â•

 â”€â”€â”€ SCAN PROGRESS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Risk Score    55/100       â†“14 points (was 69)
  Findings      15 remaining â†“3 resolved
  Guardrails    47 detected  â†‘25 since last scan
  Crews clean   12 of 20     â†‘10 since last scan

 â”€â”€â”€ RESOLVED â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  âœ“ STRATUM-002     Destructive tool with no gate â€” RESOLVED
  âœ“ STRATUM-009     No timeout on HTTP calls â€” RESOLVED
  âœ“ STRATUM-CR06.1  Data access bypass â€” RESOLVED

  3 resolved Â· 0 new Â· 15 remaining


 â”€â”€â”€ YOUR AGENT ARCHITECTURE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

 StockAnalysisCrew (4 agents, sequential)  42/100
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚                                                                   â”‚
 â”‚   financial.. â”€â”€â–¶ research_.. â”€â”€â–¶ financial.. â”€â”€â–¶ investmen..     â”‚
 â”‚     financial_agent: ScrapeWebsiteTool, WebsiteSearchTool, Calcul â”‚
 â”‚     research_analyst_agent: ScrapeWebsiteTool, SEC10QTool, SEC10K â”‚
 â”‚     financial_analyst_agent: ScrapeWebsiteTool, WebsiteSearchTool â”‚
 â”‚     investment_advisor_agent: ScrapeWebsiteTool, WebsiteSearchToo â”‚
 â”‚                                                                   â”‚
 â”‚   â˜¢ STRATUM-CR05: Shared tool blast radius: ScrapeWebsiteTool ->  â”‚
 â”‚   â˜¢ STRATUM-CR05.1: Shared tool blast radius: WebsiteSearchTool - â”‚
 â”‚   â˜¢ STRATUM-CR05.2: Shared tool blast radius: CalculatorTool -> 3 â”‚
 â”‚   ğŸ”´ ScrapeWebsiteTool shared by 4 agents                          â”‚
 â”‚   ğŸ”´ WebsiteSearchTool shared by 3 agents                          â”‚
 â”‚   ğŸ”´ CalculatorTool shared by 3 agents                             â”‚
 â”‚   ğŸ”´ SEC10QTool shared by 3 agents                                 â”‚
 â”‚   ğŸ”´ SEC10KTool shared by 3 agents                                 â”‚
 â”‚                                                                   â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

 EmailFilterCrew (3 agents, sequential)  14/100
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚                                                                   â”‚
 â”‚   email_filter_ag.. â”€â”€â–¶ email_action_ag.. â”€â”€â–¶ email_response_..   â”‚
 â”‚     email_filter_agent: SerperDevTool                             â”‚
 â”‚     email_action_agent: GmailGetThread, TavilySearchResults       â”‚
 â”‚     email_response_writer: TavilySearchResults, GmailGetThread    â”‚
 â”‚                                                                   â”‚
 â”‚   âš  STRATUM-CR06: 'Email Response Writer' bypasses 'Email Action  â”‚
 â”‚   âš  BYPASS: Email Response Writer reads Gmail inbox directly      â”‚
 â”‚   ğŸ”´ GmailGetThread shared by 2 agents                             â”‚
 â”‚   ğŸ”´ TavilySearchResults shared by 2 agents                        â”‚
 â”‚   ğŸ”´ GmailToolkit shared by 2 agents                               â”‚
 â”‚                                                                   â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

 +18 more crews (stratum scan . --verbose to see all)

 RISK SCORE â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  55 / 100
            â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”
            2 critical Â· 5 high Â· 7 medium Â· 1 low


 â”€â”€â”€ FIX THESE FIRST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

 â‘  Add input validation on shared tools                   â–‘ 30 min
   Resolves 3 findings (3 critical)

   Financial Agent is shared by 4 agents in StockAnalysisCrew.
   If Financial Agent returns poisoned results (SEO spam,
   prompt injection in API response), all 4 agents process that
   payload. One compromised API response corrupts your entire
   crew in a single request.

   Fix:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ class ValidatedSearch(BaseTool):                       â”‚
   â”‚       def _run(self, query: str) -> str:               â”‚
   â”‚           raw = SerperDevTool()._run(query)            â”‚
   â”‚  +        if contains_injection_patterns(raw):         â”‚
   â”‚  +            raise ValueError("Suspicious content")   â”‚
   â”‚           return raw                                   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   Apply to: stock_analysis/crew.py

   ğŸ“ Matches real breach: ServiceNow Now Assist Shared Resource
      Your agent's shared resource amplifies compromise matches
      the pattern from ServiceNow Now Assist Shared Resource
      (March 2025).


 â‘¡ Add human review on outbound tasks                      â–‘ 5 min
   Resolves 3 findings (3 high)                              HIGH
   Partially mitigated: 11 of 20 Python-defined crews now have HITL (55%)
   â¬¤â¬¤â¬¤â¬¤â¬¤â¬¤â¬¤â¬¤â¬¤â¬¤â¬¤â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹  55% coverage

   Remaining: 9 YAML-defined crews cannot be auto-fixed.
   Run stratum scan . --fix --yaml to generate YAML patches.

   Your ExpandIdeaCrew reads external input and sends to
   external service with no human check between them. If
   someone sends a prompt injection via external input, your
   agent will send data to whatever destination the injection
   specifies. This matches the EchoLeak breach pattern (March
   2024), where a crafted email caused an agent to exfiltrate
   an entire inbox to an external server.

   Fix:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ task = Task(                                             â”‚
   â”‚       description="...",                                 â”‚
   â”‚  +    human_input=True   # review before external calls  â”‚
   â”‚   )                                                      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   Apply to: crew/agents.py, email_filter_crew/email_filter_crew.py,
instagram_post/agents.py (+3 more)

   ğŸ“ Matches real breach: Microsoft Copilot EchoLeak
      Your agent's data-to-external without review matches the
      pattern from Microsoft Copilot EchoLeak (March 2024).


 â‘¢ Fix data access bypass                                 â–‘ 15 min
   Resolves 1 findings (1 high)

   You built senior_engineer_agent as a filter to sanitize
   inputs before qa_engineer_agent processes them. But
   qa_engineer_agent has direct access to the same data source
   data source. It reads raw data without going through your
   filter. Your filter is architecturally irrelevant â€” it runs,
   but the unfiltered path exists in parallel.



 â”€â”€â”€ ALSO WORTH FIXING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

 Â· 21 external API calls have no error handling
 Â· 5 crews with findings (13 agents) have no checkpointing
 Â· No validation between agent handoffs in StockAnalysisCrew (4 agents)

 â”€â”€â”€ 8 architecture risks Â· 5 operational recommendations Â· 2 hygiene items Â·
Full details: stratum scan . --verbose

 â†’ Run stratum scan . --fix to auto-fix 4 of 15 findings

 .stratum/history.jsonl saved (3 scans)

                                     stratum v0.2 Â·
github.com/stratum-systems/stratum-cli
  Run 'stratum scan . --fix' to auto-fix 4 findings.
